/*! yammertime - v1.0.1 | Licensed under MIT */

/*! constants.js | Yammertime */
var Yt=Yt||{};Yt.Constants=Yt.Constants||{},function(a){a.classes={hidden:"hidden",largeText:" large text ",largeTile:"large",mediumText:" medium text ",mediumTile:"medium",noScroll:"no-scroll",noScrollbar:"no-scrollbar",pushSettings:"push_3",replies:"replies",replyNumber:"reply-number",smallText:" small text ",smallTile:"small",tile:"tile",tiled_view:"tiled-view",viewReplies:"view-replies",xlargeText:" xlarge text "},a.defaultConfig={accessTokens:{},animationDelay:1e4,cookie:"networkPermalink",count:3e3,idleWait:5,lastMessageId:0,lastMessageTime:"",loadDelay:15e3,messageLimit:20,oldLastMessageId:0,showDelay:3e3,textSize:"medium",updateCount:0},a.defaultSettings={bgColor:"#455560",debug:"false",groupId:"-1",olderReplies:"false",logoUrl:"",postRotation:"false",showSticky:"false",stickyDate:0,textSize:"small",truncate:"false",tiled:"true",yammerLinks:"false"},a.settingKeys={appendPostReplies:"appendPostReplies",bgColor:"bgColor",debug:"debug",fullName:"fullName",groupId:"groupId",logoUrl:"logoUrl",modalPostAppend:"modalPostAppend",networkId:"networkId",networkName:"networkName",networkPermalink:"networkPermalink",networkToken:"networkToken",noDefaults:"noDefaults",olderReplies:"olderReplies",postId:"postId",postRotation:"postRotation",showSticky:"showSticky",sticky:"sticky",stickyDate:"stickyDate",textSize:"textSize",tiled:"tiled",topicId:"topicId",topicName:"topicName",truncate:"truncate",yammerLinks:"yammerLinks"}}(Yt.Constants);
/*! settings.js | Yammertime */
var Yt=Yt||{};Yt.Settings=Yt.Settings||{},function(a){function b(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b}var c=Yt.Constants,d=c.settingKeys;a.setDefaults=function(){var e=c.defaultSettings,f=b();if(a.get(d.noDefaults)||f[f[0]]){if(f[f[0]]){for(var g=0;g<f.length;g++)e[f[g]]=f[f[g]];a.set(e)}}else a.set(e)},a.get=function(a){return"true"===localStorage[a]?!0:"false"===localStorage[a]?!1:localStorage[a]},a.set=function(a,b){var c="undefined"!=typeof arguments[1]?"":arguments[0];if(c)for(var d in c)c.hasOwnProperty(d)&&(localStorage[d]=c[d]);else localStorage[a]=b}}(Yt.Settings);
this.Yt=this.Yt||{},this.Yt.Templates=this.Yt.Templates||{},this.Yt.Templates.message=Handlebars.template({1:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression,j=this.lambda;return'    <div class="'+(null!=(e=b.unless.call(a,null!=a?a.replied_to_id:a,{name:"unless",hash:{},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+" "+(null!=(e=b["if"].call(a,null!=a?a.replied_to_id:a,{name:"if",hash:{},fn:this.program(4,d,0),inverse:this.noop,data:d}))?e:"")+'" id="'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:g,typeof f===h?f.call(a,{name:"id",hash:{},data:d}):f))+'">\r\n        <div class="userimg"><img src="'+i(j(null!=a?a.mugshot_url:a,a))+'" height="96" width="96"/></div>\r\n\r\n        <div class="content">\r\n            <div class="sender">\r\n                <a '+i((f=null!=(f=b.link_helper||(null!=a?a.link_helper:a))?f:g,typeof f===h?f.call(a,{name:"link_helper",hash:{},data:d}):f))+'="https://www.yammer.com/users/'+i((f=null!=(f=b.username||(null!=a?a.username:a))?f:g,typeof f===h?f.call(a,{name:"username",hash:{},data:d}):f))+'">\r\n                    '+i((f=null!=(f=b.full_name||(null!=a?a.full_name:a))?f:g,typeof f===h?f.call(a,{name:"full_name",hash:{},data:d}):f))+"\r\n                </a>\r\n"+(null!=(e=b["if"].call(a,null!=a?a.replied_to_id:a,{name:"if",hash:{},fn:this.program(6,d,0),inverse:this.noop,data:d}))?e:"")+'            </div>\r\n\r\n            <div class="message">\r\n                <span class="messagebody">'+(null!=(e=j(null!=(e=null!=a?a.body:a)?e.rich:e,a))?e:"")+"\r\n"+(null!=(e=b.each.call(a,null!=a?a.attachments:a,{name:"each",hash:{},fn:this.program(8,d,0),inverse:this.noop,data:d}))?e:"")+"                </span>\r\n\r\n"+(null!=(e=b["if"].call(a,null!=a?a.attachments:a,{name:"if",hash:{},fn:this.program(13,d,0),inverse:this.noop,data:d}))?e:"")+"            </div>\r\n\r\n"+(null!=(e=b["if"].call(a,null!=a?a.thread_id:a,{name:"if",hash:{},fn:this.program(22,d,0),inverse:this.noop,data:d}))?e:"")+'\r\n            <div class="metadata">\r\n                <span class="messageinfo">Posted <a '+i((f=null!=(f=b.link_helper||(null!=a?a.link_helper:a))?f:g,typeof f===h?f.call(a,{name:"link_helper",hash:{},data:d}):f))+'="'+i((f=null!=(f=b.web_url||(null!=a?a.web_url:a))?f:g,typeof f===h?f.call(a,{name:"web_url",hash:{},data:d}):f))+'" target="_blank" class="creationdate unformatted" data-time="'+i((f=null!=(f=b.created_at||(null!=a?a.created_at:a))?f:g,typeof f===h?f.call(a,{name:"created_at",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.created_at||(null!=a?a.created_at:a))?f:g,typeof f===h?f.call(a,{name:"created_at",hash:{},data:d}):f))+"</a> "+(null!=(e=b["if"].call(a,null!=a?a.group_name:a,{name:"if",hash:{},fn:this.program(25,d,0),inverse:this.noop,data:d}))?e:"")+"</a>\r\n                </span>\r\n            </div>\r\n\r\n"+(null!=(e=b["if"].call(a,null!=(e=null!=a?a.liked_by:a)?e.count:e,{name:"if",hash:{},fn:this.program(27,d,0),inverse:this.noop,data:d}))?e:"")+"        </div>\r\n    </div>\r\n"},2:function(a,b,c,d){return"yam"},4:function(a,b,c,d){return"yam reply"},6:function(a,b,c,d){var e;return'                    <span class="in_reply_to"> in reply to '+this.escapeExpression((e=null!=(e=b.in_reply_to||(null!=a?a.in_reply_to:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"in_reply_to",hash:{},data:d}):e))+"</span>\r\n"},8:function(a,b,c,d){var e;return(null!=(e=b["if"].call(a,null!=a?a.body:a,{name:"if",hash:{},fn:this.program(9,d,0),inverse:this.noop,data:d}))?e:"")+(null!=(e=b["if"].call(a,null!=a?a.praised_user_ids:a,{name:"if",hash:{},fn:this.program(11,d,0),inverse:this.noop,data:d}))?e:"")},9:function(a,b,c,d){var e;return'                            <span class="repost">'+(null!=(e=this.lambda(null!=(e=null!=a?a.body:a)?e.plain:e,a))?e:"")+"</span>\r\n"},11:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'                            <div class="praised">\r\n                                <span>'+h((e=null!=(e=b.description||(null!=a?a.description:a))?e:f,typeof e===g?e.call(a,{name:"description",hash:{},data:d}):e))+'</span>\r\n                                <span class="praise '+h((e=null!=(e=b.icon||(null!=a?a.icon:a))?e:f,typeof e===g?e.call(a,{name:"icon",hash:{},data:d}):e))+'"><em>'+h((e=null!=(e=b.comment||(null!=a?a.comment:a))?e:f,typeof e===g?e.call(a,{name:"comment",hash:{},data:d}):e))+"</em></span>\r\n                            </div>\r\n"},13:function(a,b,c,d){var e;return'                    <div class="attachments">\r\n'+(null!=(e=b.each.call(a,null!=a?a.attachments:a,{name:"each",hash:{},fn:this.program(14,d,0),inverse:this.noop,data:d}))?e:"")+"                    </div>\r\n"},14:function(a,b,c,d){var e;return(null!=(e=b["if"].call(a,null!=a?a.image:a,{name:"if",hash:{},fn:this.program(15,d,0),inverse:this.noop,data:d}))?e:"")+"\r\n"+(null!=(e=b["if"].call(a,null!=a?a.file:a,{name:"if",hash:{},fn:this.program(17,d,0),inverse:this.noop,data:d}))?e:"")+"\r\n"+(null!=(e=b["if"].call(a,null!=a?a.ymodule:a,{name:"if",hash:{},fn:this.program(19,d,0),inverse:this.noop,data:d}))?e:"")},15:function(a,b,c,d){var e;return'                                <img class="attachment" src="'+this.escapeExpression(this.lambda(null!=(e=null!=a?a.image:a)?e.url:e,a))+'">\r\n'},17:function(a,b,c,d){var e,f,g=this.escapeExpression,h=b.helperMissing,i="function";return'                                <div class="document clr">\r\n                                    <span class="item"><a href="'+g(this.lambda(null!=(e=null!=a?a.file:a)?e.url:e,a))+'"><img src="'+g((f=null!=(f=b.large_icon_url||(null!=a?a.large_icon_url:a))?f:h,typeof f===i?f.call(a,{name:"large_icon_url",hash:{},data:d}):f))+'" /><span class="download">Download</span></a></span>\r\n                                    <span class="name">'+g((f=null!=(f=b.full_name||(null!=a?a.full_name:a))?f:h,typeof f===i?f.call(a,{name:"full_name",hash:{},data:d}):f))+"</span>\r\n                                </div>\r\n"},19:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'                                <div class="document clr">\r\n'+(null!=(e=b["if"].call(a,null!=a?a.thumbnail_url:a,{name:"if",hash:{},fn:this.program(20,d,0),inverse:this.noop,data:d}))?e:"")+'                                    <span class="name clr"><a href="'+i((f=null!=(f=b.web_url||(null!=a?a.web_url:a))?f:g,typeof f===h?f.call(a,{name:"web_url",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+"</a></span>\r\n                                </div>\r\n"},20:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'                                    <span class="item clr"><a href="'+h((e=null!=(e=b.web_url||(null!=a?a.web_url:a))?e:f,typeof e===g?e.call(a,{name:"web_url",hash:{},data:d}):e))+'"><img src="'+h((e=null!=(e=b.thumbnail_url||(null!=a?a.thumbnail_url:a))?e:f,typeof e===g?e.call(a,{name:"thumbnail_url",hash:{},data:d}):e))+'" width="96px" /></a></span>\r\n'},22:function(a,b,c,d){var e;return null!=(e=b.unless.call(a,null!=a?a.replied_to_id:a,{name:"unless",hash:{},fn:this.program(23,d,0),inverse:this.noop,data:d}))?e:""},23:function(a,b,c,d){var e;return"                    "+this.escapeExpression((e=null!=(e=b.update_count||(null!=a?a.update_count:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"update_count",hash:{},data:d}):e))+"\r\n"},25:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return"in <a "+h((e=null!=(e=b.link_helper||(null!=a?a.link_helper:a))?e:f,typeof e===g?e.call(a,{name:"link_helper",hash:{},data:d}):e))+'="'+h((e=null!=(e=b.group_url||(null!=a?a.group_url:a))?e:f,typeof e===g?e.call(a,{name:"group_url",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.group_name||(null!=a?a.group_name:a))?e:f,typeof e===g?e.call(a,{name:"group_name",hash:{},data:d}):e))},27:function(a,b,c,d){var e;return'                <div class="likedby">\r\n                    '+this.escapeExpression((e=null!=(e=b.like_count||(null!=a?a.like_count:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"like_count",hash:{},data:d}):e))+" this post.\r\n                </div>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return null!=(e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:""},useData:!0}),this.Yt.Templates.tile=Handlebars.template({1:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'    <div class="'+(null!=(e=b.unless.call(a,null!=a?a.replied_to_id:a,{name:"unless",hash:{},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+" "+(null!=(e=b["if"].call(a,null!=a?a.replied_to_id:a,{name:"if",hash:{},fn:this.program(4,d,0),inverse:this.noop,data:d}))?e:"")+'" id="'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:g,typeof f===h?f.call(a,{name:"id",hash:{},data:d}):f))+'">\r\n        <div class="meta clr">\r\n            <div class="userimg">\r\n                <img src="'+i((f=null!=(f=b.mugshot_url||(null!=a?a.mugshot_url:a))?f:g,typeof f===h?f.call(a,{name:"mugshot_url",hash:{},data:d}):f))+'" height="96" width="96" />\r\n            </div>\r\n            <div class="metadata">\r\n                <a '+i((f=null!=(f=b.link_helper||(null!=a?a.link_helper:a))?f:g,typeof f===h?f.call(a,{name:"link_helper",hash:{},data:d}):f))+'="https://www.yammer.com/'+i((f=null!=(f=b.user_network_helper||(null!=a?a.user_network_helper:a))?f:g,typeof f===h?f.call(a,{name:"user_network_helper",hash:{},data:d}):f))+"/users/"+i((f=null!=(f=b.username||(null!=a?a.username:a))?f:g,typeof f===h?f.call(a,{name:"username",hash:{},data:d}):f))+'" class="author">\r\n                    '+i((f=null!=(f=b.full_name||(null!=a?a.full_name:a))?f:g,typeof f===h?f.call(a,{name:"full_name",hash:{},data:d}):f))+"\r\n                </a>\r\n\r\n"+(null!=(e=b["if"].call(a,null!=a?a.replied_to_id:a,{name:"if",hash:{},fn:this.program(6,d,0),inverse:this.noop,data:d}))?e:"")+"\r\n"+(null!=(e=b["if"].call(a,null!=a?a.group_url:a,{name:"if",hash:{},fn:this.program(8,d,0),inverse:this.noop,data:d}))?e:"")+"\r\n                <a "+i((f=null!=(f=b.link_helper||(null!=a?a.link_helper:a))?f:g,typeof f===h?f.call(a,{name:"link_helper",hash:{},data:d}):f))+'="'+i((f=null!=(f=b.web_url||(null!=a?a.web_url:a))?f:g,typeof f===h?f.call(a,{name:"web_url",hash:{},data:d}):f))+'" target="_blank" class="creationdate unformatted" data-time="'+i((f=null!=(f=b.created_at||(null!=a?a.created_at:a))?f:g,typeof f===h?f.call(a,{name:"created_at",hash:{},data:d}):f))+'">\r\n                    '+i((f=null!=(f=b.created_at||(null!=a?a.created_at:a))?f:g,typeof f===h?f.call(a,{name:"created_at",hash:{},data:d}):f))+'\r\n                </a>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="content">\r\n            <div class="message">\r\n                <span class="messagebody">'+(null!=(e=this.lambda(null!=(e=null!=a?a.body:a)?e.rich:e,a))?e:"")+"\r\n"+(null!=(e=b.each.call(a,null!=a?a.attachments:a,{name:"each",hash:{},fn:this.program(10,d,0),inverse:this.noop,data:d}))?e:"")+"                </span>\r\n\r\n"+(null!=(e=b["if"].call(a,null!=a?a.attachments:a,{name:"if",hash:{},fn:this.program(15,d,0),inverse:this.noop,data:d}))?e:"")+"            </div>\r\n\r\n"+(null!=(e=b["if"].call(a,null!=a?a.thread_id:a,{name:"if",hash:{},fn:this.program(24,d,0),inverse:this.noop,data:d}))?e:"")+"\r\n"+(null!=(e=b["if"].call(a,null!=(e=null!=a?a.liked_by:a)?e.count:e,{name:"if",hash:{},fn:this.program(27,d,0),inverse:this.noop,data:d}))?e:"")+"        </div>\r\n    </div>\r\n"},2:function(a,b,c,d){return"yam"},4:function(a,b,c,d){return"yam reply"},6:function(a,b,c,d){var e;return'                    <span class="in_reply_to"> in reply to '+this.escapeExpression((e=null!=(e=b.in_reply_to||(null!=a?a.in_reply_to:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"in_reply_to",hash:{},data:d}):e))+"</span>\r\n"},8:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'                    <span class="messageinfo">Posted in <a '+h((e=null!=(e=b.link_helper||(null!=a?a.link_helper:a))?e:f,typeof e===g?e.call(a,{name:"link_helper",hash:{},data:d}):e))+'="'+h((e=null!=(e=b.group_url||(null!=a?a.group_url:a))?e:f,typeof e===g?e.call(a,{name:"group_url",hash:{},data:d}):e))+'">'+h(this.lambda(null!=a?a.group_name:a,a))+"</a></span>\r\n"},10:function(a,b,c,d){var e;return(null!=(e=b["if"].call(a,null!=a?a.body:a,{name:"if",hash:{},fn:this.program(11,d,0),inverse:this.noop,data:d}))?e:"")+(null!=(e=b["if"].call(a,null!=a?a.praised_user_ids:a,{name:"if",hash:{},fn:this.program(13,d,0),inverse:this.noop,data:d}))?e:"")},11:function(a,b,c,d){var e;return'                            <span class="repost">'+(null!=(e=this.lambda(null!=(e=null!=a?a.body:a)?e.plain:e,a))?e:"")+"</span>\r\n"},13:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'                            <div class="praised">\r\n                                <span>'+h((e=null!=(e=b.description||(null!=a?a.description:a))?e:f,typeof e===g?e.call(a,{name:"description",hash:{},data:d}):e))+'</span>\r\n                                <span class="praise '+h((e=null!=(e=b.icon||(null!=a?a.icon:a))?e:f,typeof e===g?e.call(a,{name:"icon",hash:{},data:d}):e))+'"><em>'+h((e=null!=(e=b.comment||(null!=a?a.comment:a))?e:f,typeof e===g?e.call(a,{name:"comment",hash:{},data:d}):e))+"</em></span>\r\n                            </div>\r\n"},15:function(a,b,c,d){var e;return'                    <div class="attachments">\r\n'+(null!=(e=b.each.call(a,null!=a?a.attachments:a,{name:"each",hash:{},fn:this.program(16,d,0),inverse:this.noop,data:d}))?e:"")+"                    </div>\r\n"},16:function(a,b,c,d){var e;return(null!=(e=b["if"].call(a,null!=a?a.image:a,{name:"if",hash:{},fn:this.program(17,d,0),inverse:this.noop,data:d}))?e:"")+"\r\n"+(null!=(e=b["if"].call(a,null!=a?a.file:a,{name:"if",hash:{},fn:this.program(19,d,0),inverse:this.noop,data:d}))?e:"")+"\r\n"+(null!=(e=b["if"].call(a,null!=a?a.ymodule:a,{name:"if",hash:{},fn:this.program(21,d,0),inverse:this.noop,data:d}))?e:"")},17:function(a,b,c,d){var e;return'                                <img class="attachment" src="'+this.escapeExpression(this.lambda(null!=(e=null!=a?a.image:a)?e.url:e,a))+'">\r\n'},19:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'                                <div class="document clr">\r\n                                    <span class="item"><a '+i((f=null!=(f=b.link_helper||(null!=a?a.link_helper:a))?f:g,typeof f===h?f.call(a,{name:"link_helper",hash:{},data:d}):f))+'="'+i(this.lambda(null!=(e=null!=a?a.file:a)?e.url:e,a))+'"><img src="'+i((f=null!=(f=b.large_icon_url||(null!=a?a.large_icon_url:a))?f:g,typeof f===h?f.call(a,{name:"large_icon_url",hash:{},data:d}):f))+'" /><span class="download">Download</span></a></span>\r\n                                    <span class="name">'+i((f=null!=(f=b.full_name||(null!=a?a.full_name:a))?f:g,typeof f===h?f.call(a,{name:"full_name",hash:{},data:d}):f))+"</span>\r\n                                </div>\r\n"},21:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'                                <div class="document clr">\r\n'+(null!=(e=b["if"].call(a,null!=a?a.thumbnail_url:a,{name:"if",hash:{},fn:this.program(22,d,0),inverse:this.noop,data:d}))?e:"")+'                                    <span class="name clr"><a href="'+i((f=null!=(f=b.web_url||(null!=a?a.web_url:a))?f:g,typeof f===h?f.call(a,{name:"web_url",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+"</a></span>\r\n                                </div>\r\n"},22:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'                                    <span class="item clr"><a href="'+h((e=null!=(e=b.web_url||(null!=a?a.web_url:a))?e:f,typeof e===g?e.call(a,{name:"web_url",hash:{},data:d}):e))+'"><img src="'+h((e=null!=(e=b.thumbnail_url||(null!=a?a.thumbnail_url:a))?e:f,typeof e===g?e.call(a,{name:"thumbnail_url",hash:{},data:d}):e))+'" width="96px" /></a></span>\r\n'},24:function(a,b,c,d){var e;return null!=(e=b.unless.call(a,null!=a?a.replied_to_id:a,{name:"unless",hash:{},fn:this.program(25,d,0),inverse:this.noop,data:d}))?e:""},25:function(a,b,c,d){var e;return"                    "+this.escapeExpression((e=null!=(e=b.update_count||(null!=a?a.update_count:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"update_count",hash:{},data:d}):e))+"\r\n"},27:function(a,b,c,d){var e;return'                <div class="likedby">\r\n                    '+this.escapeExpression((e=null!=(e=b.like_count||(null!=a?a.like_count:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"like_count",hash:{},data:d}):e))+" this post.\r\n                </div>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return null!=(e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:""},useData:!0});
/*! utilities.js | Yammertime */
var Yt=Yt||{};Yt.Util=Yt.Util||{},function(a,b,c,d,e){var f=Yt.Constants.classes;a.addTrim=function(){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},a.addOptions=function(a,c,d,e){a.empty(),b.each(c,function(b,c){a.get(0).options.add(new Option(c[d],c[e]))})},a.isInt=function(a){var b=parseInt(a);return isNaN(b)?!1:a==b&&a.toString()==b.toString()},a.isUrl=function(a){var b=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return b.test(a)},a.getElements=function(){return{body:b("body"),closeButton:b(".close-button"),container:b(".container"),cancelButton:b('.settings button[name="cancel"]'),feed:b(".feed"),header:b(".header"),headerLogo:b(".header-logo"),landing:b(".landing"),logout:b("#logout"),mainContent:b(".main"),overlay:b(".overlay"),overlayExpanded:b(".expanded.modal"),postExpanded:b(".post-expanded"),repliesExpanded:b(".replies-expanded"),settings:b("#settings"),settingsDialog:b(".settings"),settingsForm:b(".settings form"),settingsInputs:b('.settings form :input[name!="color"][name!="logoUrl"][name!="text-size"][name!="post-rotation"]'),spinner:b("#spinner"),sticky:b(".sticky"),tile:b(".tile"),viewReplies:b(".view-replies"),color:b('.settings input[name="color"]'),group:b('.settings select[name="group"]'),logoUrl:b('.settings input[name="logoUrl"]'),network:b('.settings select[name="network"]'),postRotation:b('.settings input[name="post-rotation"]'),remove:b('.settings input[name="remove"]'),showSticky:b('.settings input[name="show-sticky"]'),submitButton:b('.settings button[name="submit"]'),textSize:b('.settings select[name="text-size"]'),tiled:b('.settings input[name="tiled"]'),topic:b('.settings input[name="topic"]'),truncate:b('.settings input[name="truncate"]'),yammerLinks:b('.settings input[name="yammer-links"]')}},a.toggleScroll=function(){b("body").toggleClass(f.noScroll).toggleClass(f.noScrollbar)},a.requestErrorHandler=function(a){console&&console.log&&console.log("An error has occured:",a)},a.log=function(a,b){b||(b=""),console&&console.log&&console.log(a,b)},a.addTrim()}(Yt.Util,jQuery,window,document);
/*! settings_modal.js | Yammertime */
var Yt=Yt||{};Yt.SettingsModal=Yt.SettingsModal||{},function(a){function b(a){a.preventDefault(),p.toggleScroll(),r.settingsDialog.toggleClass(s.hidden),r.overlay.toggleClass(s.hidden)}function c(){var a="disabled";"-1"!==r.group.val()?r.topic.attr(a,a):r.topic.removeAttr(a)}function d(){$.each(t.accessTokens,function(a,b){b.network_id.toString()===r.network.val()&&q.set(u.networkToken,b.token)}),p.log("Network changed to ",r.network.find("option:selected").text()),p.log("Network id is ",r.network.val()),p.log("Network token is ",q.get(u.networkToken)),p.log("Setting new auth token..."),yam.platform.setAuthToken(q.get(u.networkToken),function(b){p.log("Authorization token response received: ",b),a.loadGroups(a.addGroups)})}function e(){r.settingsForm.data("changed","true")}function f(a){p.requestErrorHandler(a),retrieveFeed()}function g(){var a=q.get(u.bgColor);a&&r.body.css("background",a)}function h(){var a=q.get(u.logoUrl),b="src";p.isUrl(a)?r.headerLogo.attr(b,a):r.headerLogo.attr(b,"images/yammertime.png")}function i(){var a=q.get(u.textSize);"small"===a?r.feed.removeClass(s.mediumText+s.largeText+s.xlargeText).addClass(s.smallText):"medium"===a?r.feed.removeClass(s.smallText+s.largeText+s.xlargeText).addClass(s.mediumText):"large"===a?r.feed.removeClass(s.smallText+s.medium+s.xlarge).addClass(s.large):"xlarge"===a&&r.feed.removeClass(s.smallText+s.mediumText+s.largeText).addClass(s.xlargeText),q.get(u.tiled)&&r.feed.trigger("tilePosts")}function j(){r.settingsForm.data("changed","false");var a=q.get(u.groupId);r.network.val(q.get(u.networkId)),r.logoUrl.val(q.get(u.logoUrl)),r.color.val(q.get(u.bgColor)),r.topic.val(q.get(u.topicName)),r.textSize.val(q.get(u.textSize)||t.textSize),a&&p.isInt(a)&&r.group.val(a);var b={remove:"remove",postRotation:"postRotation",showSticky:"showSticky",truncate:"truncate",tiled:"tiled",yammerLinks:"yammerLinks"};l(b),c(),p.toggleScroll(),r.settingsDialog.toggleClass(s.hidden),r.overlay.toggleClass(s.hidden)}function k(b){b.preventDefault(),r.settingsDialog.toggleClass(s.hidden),r.overlay.toggleClass(s.hidden);var c={bgColor:r.color.val(),groupId:r.group.val(),logoUrl:r.logoUrl.val(),networkId:r.network.val(),noDefaults:!0,postRotation:r.postRotation.is(":checked"),remove:r.remove.is(":checked"),showSticky:r.showSticky.is(":checked"),textSize:r.textSize.val(),truncate:r.truncate.is(":checked"),tiled:r.tiled.is(":checked"),yammerLinks:r.yammerLinks.is(":checked")};q.set(c),a.initStyleSettings(),p.toggleScroll(),r.topic.val()?"true"===r.settingsForm.data("changed")&&o.getOrCreateTopicId(r.topic.val(),m,f):(q.set(u.topicId,""),q.set(u.topicName,""),"true"===r.settingsForm.data("changed")&&r.feed.trigger("retrieveFeed"))}function l(a,b){var c="undefined"!=typeof arguments[1]?"":arguments[0];if(c)for(var d in c)c.hasOwnProperty(d)&&q.get(d)&&r[c[d]].attr("checked","true");else q.get(a)&&r[b].attr("checked","true");q.get(u.tiled)?r.postRotation.attr("disabled","disabled"):r.postRotation.removeAttr("disabled")}function m(a){var b={topicName:a.name,topicId:a.id};q.set(b),r.feed.trigger("retrieveFeed")}var n=Yt.Constants,o=Yt.Feed,p=Yt.Util,q=Yt.Settings,r=p.getElements(),s=n.classes,t=n.defaultConfig,u=n.settingKeys;a.oauth={},a.addNetworks=function(a){p.addOptions(r.network,a,"name","permalink")},a.addGroups=function(a){p.log("Groups loaded: ",a),p.addOptions(r.group,a,"full_name","id"),r.group.prepend('<option value="-1">All groups</option>')},a.bindEvents=function(){r.settings.on("click",j),r.cancelButton.on("click",b),r.submitButton.on("click",k),r.network.on("change",d),r.group.on("change",c),r.settingsInputs.on("change",e)},a.buildNetworkSelector=function(){p.addOptions(r.network,t.accessTokens,"network_name","network_id")},a.loadGroups=function(a){p.log("Loading groups..."),yam.platform.request({url:"groups.json",method:"GET",data:{mine:"1"},success:a,error:p.requestErrorHandler})},a.initStyleSettings=function(){g(),h(),i()}}(Yt.SettingsModal);
/*! 5feed.js | Yammertime */
var Yt=Yt||{};Yt.Feed=Yt.Feed||{},function(a,b,c,d){function e(b){p.get(v.tiled)?a.tilePosts():(s.container.removeClass(t.tiled_view),s.settingsDialog.removeClass(t.pushSettings))}function f(){o.log("Getting user token..."),yam.platform.request({url:"users/current.json",method:"GET",success:function(b){o.log(b.contact.email_addresses[0].address+" is logged in"),a.retrieveFeed()},error:o.requestErrorHandler})}function g(a){var b=[];if(p.get(v.showSticky)){for(var c=0;c<a.length;c++)"announcement"===a[c].message_type&&(b.push(a[c]),a.splice(c,1),c--);b.length>0?(stickyDate=moment(b[0].created_at).format("X"),stickyDate>=p.get(v.stickyDate)&&(b='<p datetime="'+b[0].created_at+'">'+b[0].body.plain+"</p>",p.set(v.sticky,b),p.set(v.stickyDate,stickyDate),j())):p.get(v.sticky)&&j()}else p.set(v.stickyDate,0),s.sticky.addClass(t.hidden);return a}function h(a){var b={},c={},d=p.get(v.yammerLinks);for(var e in a.references)if(a.references.hasOwnProperty(e)){var f=a.references[e];"user"===f.type?(b[f.id]=f,b[f.name]=f):"message"===f.type?c[f.id]=f:"group"===f.type?b[f.id]=f:"thread"===f.type&&(b[f.id]=f)}for(e in a.messages)if(a.messages.hasOwnProperty(e)){var g=a.messages[e];if(g.sender_id&&(g.mugshot_url=b[g.sender_id].mugshot_url.replace("48x48","96x96"),g.full_name=b[g.sender_id].full_name,g.username=b[g.sender_id].name),g.thread_id&&(g.thread_stats=b[g.thread_id].stats),"-1"===p.get(v.groupId)&&g.group_id&&(g.group_name=b[g.group_id].full_name,g.group_url=b[g.group_id].web_url),0===g.body.rich.indexOf("(See attached"))for(var h in g.attachments)if(g.attachments.hasOwnProperty(h)){var i=g.attachments[h];i.ymodule&&(g.body.rich=i.name)}g.body.rich=g.body.rich.replace(/br><br/g,"br"),d&&(g.body.rich=g.body.rich.replace("href='https://www.yammer.com","'"),g.body.rich=g.body.rich.replace('href="https://www.yammer.com','"')),g.replied_to_id&&(c[g.replied_to_id]?c[g.replied_to_id].sender_id&&(in_reply_to=b[c[g.replied_to_id].sender_id],g.in_reply_to=in_reply_to.full_name):g.replied_to_id=null)}return a.messages}function i(a){var b,c,d,e,f,g=p.get(v.postId)||"",h=a.length,i=p.get(v.olderReplies);if(d=h>0?a[0].thread_stats.updates:!1,e=p.get(v.tiled)?r.tile:r.message,f=e(a),f=Array.prototype.slice.call($(f)),f=f.reverse(),g.length>0){if(c=p.get(v.modalPostAppend)?s.repliesExpanded:$("#"+g),p.get(v.tiled)){var j="",k=function(){var a={thread_id:g,thread_stats:{updates:d}};return m(a),"<h2>"+j+"</h2>"};h>0&&h<=u.messageLimit?(b=1===h?" reply":" replies",j='<span class="num">'+h.toString()+"</span>"+b):j=h===u.messageLimit&&h!==d-1?"Latest replies":"No replies yet :(",c.append(k)}if($(f).appendTo(c),h===u.messageLimit&&h!==d-1){d=d-u.messageLimit>u.messageLimit?u.messageLimit:d-u.messageLimit-1,b=1===d?" message":" messages";var n='<a href="#" id="'+a[h-1].id+'" class="older-replies">View <span class="num">'+d+'</span> older <span class="sores">'+b+"</span></a>";$(n).insertAfter(c.find("h2"))}s.spinner.hide(),l(h,c),p.set(v.appendPostReplies,"false"),p.set(v.modalPostAppend,"false"),p.set(v.postId,"")}else if(i){var o=parseInt(s.repliesExpanded.find("h2").find(".num").text());$(f).insertAfter($(".older-replies")),u.updateCount<u.messageLimit&&(u.updateCount=u.messageLimit),d-u.updateCount-1<=u.messageLimit?($(".older-replies").remove(),u.updateCount=u.messageLimit):($(".older-replies").attr("id",a[h-1].id),u.updateCount+=h,d-u.updateCount===2&&($(".older-replies").find(".sores").text("message"),$(".older-replies").find(".num").text("1"))),s.repliesExpanded.find("h2").find(".num").text(o+h),p.set(v.olderReplies,"false")}else f=f.reverse(),$(f).prependTo(s.feed),u.oldLastMessageId=u.lastMessageId,l(h)}function j(){moment().format("X")-p.get(v.stickyDate)<604800?(s.sticky.html(sticky),s.sticky.removeClass(t.hidden)):(p.set(v.sticky,""),p.set(v.stickyDate,""),s.sticky.addClass(t.hidden),s.sticky.html(""))}function k(a){for(var b=0;b<a.length;b++)if(a[b].id>u.lastMessageId)u.lastMessageId=a[b].id;else if(0!==u.oldLastMessageId&&"true"!==p.get(v.appendPostReplies)){m(a[b]);var c=a[b].id,d=$("#"+c);d.length>0&&(a.splice(b,1),b--)}return a}function l(a,b){if(p.get(v.truncate)&&!p.get(v.tiled))if(b){var c;c=2===b.find(".message").first().find("span.messagebody").length?2:1;for(var d=c;a+1>d;d++)$(b.find("span.messagebody")[d]).truncate({max_length:275})}else for(var e=s.feed.find("span.messagebody"),f=0;a>f;f++)$(e[f]).truncate({max_length:275})}function m(a){var b=$("#"+a.thread_id.toString()),c=b.find("."+t.replyNumber);if(c.length>0)c.text((a.thread_stats.updates-1).toString()),a.thread_stats.updates>2?c.next().text("replies"):2===a.thread_stats.updates?c.next().text("reply"):c.parents(".replies").remove();else if(2===a.thread_stats.updates){var d='<div class="'+t.replies+'"><a href="#'+a.thread_id+'" class="'+t.viewReplies+'"><span class="'+t.replyNumber+'">1</span> <span>reply</span></a></div>',e=b.find(".message");$(d).insertAfter(e)}}var n=Yt.Constants,o=Yt.Util,p=Yt.Settings,q=Yt.SettingsModal,r=Yt.Templates,s=(q.oauth,o.getElements()),t=n.classes,u=n.defaultConfig,v=n.settingKeys;a.getOrCreateTopicId=function(a,b,c){yam.platform.request({url:"topics.json",type:"POST",data:"name="+a,dataType:"json",success:b,error:c})},a.loadMessages=function(a,b){o.log("Loading messages..."),yam.platform.request({url:a,method:"GET",dataType:"json",success:b,error:o.requestErrorHandler})},a.placeMessages=function(b){o.log("Messages loaded"),o.log("Messages object: ",b);var c=h(b),d=c.length;d>0&&(c=g(c),c=k(c),i(c),a.formatCreationDates(),e(c))},a.formatCreationDates=function(){$(".creationdate").each(function(){var a=$(this).data("time"),b=moment(new Date(a)).fromNow(),c=" "+b;$(this).text(c)})},a.loadTokens=function(a){o.log("Loading tokens..."),yam.platform.request({url:"oauth/tokens.json",method:"GET",success:function(b){a.accessTokens=b,o.log("Loaded tokens: ",a.accessTokens),o.log("Setting new authorization token..."),p.set(v.networkId,a.accessTokens[0].network_id),p.set(v.networkToken,a.accessTokens[0].token),p.set(v.networkName,a.accessTokens[0].network_name),p.set(v.networkPermalink,a.accessTokens[0].network_permalink),yam.platform.setAuthToken(p.get(v.networkToken),function(a){o.log("Authorization token response received: ",a),q.loadGroups(q.addGroups)}),q.buildNetworkSelector(),f()},error:o.requestErrorHandler})},a.retrieveFeed=function(){u.lastMessageId=0,u.oldLastMessageId=0,s.feed.html(""),s.sticky.html("");var b=p.get(v.groupId),c=p.get(v.topicId);b&&o.isInt(b)&&-1!=b?a.loadMessages("messages/in_group/"+b+".json?threaded=true&limit="+u.messageLimit,a.placeMessages):c&&o.isInt(c)?a.loadMessages("messages/about_topic/"+c+".json?threaded=true&limit="+u.messageLimit,a.placeMessages):a.loadMessages("messages.json?threaded=true&limit="+u.messageLimit,a.placeMessages)},a.tilePosts=function(){var a=$(".feed > div");a.addClass(t.tile),a.each(function(){var a=$(this);if(a.find(".messagebody").first()){var b=$(a.find(".messagebody").first()[0]).text().replace("(less)","").trim();b.length>750?a.addClass(t.largeTile):b.length>500?a.addClass(t.mediumTile):a.addClass(t.smallTile)}}),s.container.addClass(t.tiled_view),$(".feed .yam").length&&(s.feed.masonry({itemSelector:".tile",gutter:20,columnWidth:355}),s.feed.masonry("reloadItems"))}}(Yt.Feed,window,document,void 0);
/*! template_helpers.js | Yammertime */
!function(a){var b=Yt.Constants.classes,c=Yt.Constants.settingKeys,d=Yt.Settings;a.registerHelper("like_count",function(){if(this.liked_by.count>1){for(var b="",c=this.liked_by.names.length,d=0;c>d;d++)c-1>d?(b+=this.liked_by.names[d].full_name,b+=d===c-2&&this.liked_by.count<4?" ":", "):b+=this.liked_by.count>3?this.liked_by.names[d].full_name+" ":"and "+this.liked_by.names[d].full_name;return this.liked_by.count>3&&(b+="and "+(this.liked_by.count-3).toString(),b+=this.liked_by.count-3===1?" other":" others"),new a.SafeString(b+" like")}return new a.SafeString(this.liked_by.names[0].full_name+" likes")}),a.registerHelper("link_helper",function(){var b=d.get(c.yammerLinks);return b?new a.SafeString("id"):new a.SafeString("href")}),a.registerHelper("update_count",function(){var c=parseInt(this.thread_stats.updates)-1,d='<div class="'+b.replies+'">';return c>1?new a.SafeString(d+'<a href="#'+this.thread_id+'" class="'+b.viewReplies+'"><span class="'+b.replyNumber+'">'+c+"</span> <span>replies</span></a></div>"):1===c?new a.SafeString(d+'<a href="#'+this.thread_id+'" class="'+b.viewReplies+'"><span class="'+b.replyNumber+'">1</span> <span>reply</span></a></div>'):void 0}),a.registerHelper("user_network_helper",function(){var b=d.get(c.networkId);return new a.SafeString(b)})}(Handlebars);
/*! main.js | Yammertime */
!function(a,b,c,d,e,f){function g(){y.bindEvents(),z.closeButton.on("click",h),z.container.on("click","a.view-replies",r),z.container.on("click","a.older-replies",n),z.logout.on("click",m),z.feed.on("click","."+A.tile,i),z.feed.on("tilePosts",w.tilePosts),z.feed.on("retrieveFeed",w.retrieveFeed),a(e).on("keyup",k),j()}function h(){z.settingsDialog.addClass(A.hidden),z.overlayExpanded.addClass(A.hidden),z.overlay.addClass(A.hidden),v.toggleScroll(),z.repliesExpanded.html(""),z.repliesExpanded.html(z.spinner.show())}function i(){var b=a(this).attr("id");z.overlayExpanded.toggleClass(A.hidden),z.overlay.toggleClass(A.hidden),z.postExpanded.html(""),z.postExpanded.attr("id",b).html(a(this).html()),q(b),v.toggleScroll()}function j(){function b(){c=0}var c=0,d=a(this);setInterval(function(){c+=1,c===B.idleWait&&(z.body.animate({scrollTop:0}),z.overlayExpanded.hasClass(A.hidden)||h())},6e4);d.mousemove(b),d.keypress(b),d.scroll(b)}function k(a){27!==a.which||z.overlayExpanded.hasClass(A.hidden)||h()}function l(){z.landing.addClass(A.hidden),z.header.removeClass(A.hidden),g(),w.loadTokens(B),x.setDefaults(),y.initStyleSettings(),setInterval(s,B.showDelay),setInterval(p,B.animationDelay)}function m(){yam.logout(function(a){location.reload()})}function n(b){b.preventDefault();var c=a(this).attr("id"),d=a(this).parents("section").find(".post-expanded").attr("id");x.set(C.olderReplies,"true"),w.loadMessages("messages/in_thread/"+d+".json?older_than="+c+"&limit="+B.messageLimit,w.placeMessages)}function o(){a(".feed .yam:last").animate({opacity:"0"},500,function(){var b=a(this);b.prependTo(z.feed).css({opacity:"1",display:"none"}).slideDown("slow")})}function p(a){!x.get(C.tiled)&&x.get(C.postRotation)&&o()}function q(a){x.set(C.postId,a),x.set(C.appendPostReplies,"true"),x.set(C.modalPostAppend,"true"),w.loadMessages("messages/in_thread/"+a+".json?limit="+B.messageLimit,w.placeMessages)}function r(b){b&&b.preventDefault();var c=a(this);if(c.hasClass(A.viewReplies)&&0===c.parents(".yam").find(".reply").length){var d=c[0].hash.slice(1),e=c.parents(".yam")[0].id;x.set(C.appendPostReplies,"true"),x.set(C.postId,e),w.loadMessages("messages/in_thread/"+d+".json",w.placeMessages)}else c.parents(".yam").find(".reply").toggle(),c.parents(".yam").find(".reply").remove()}function s(){if(w.formatCreationDates(),B.count%B.loadDelay===0){var a=x.get(C.groupId),b=x.get(C.topicId);a&&v.isInt(a)&&"-1"!==a?w.loadMessages("messages/in_group/"+a+".json?threaded=true&newer_than="+B.lastMessageId,w.placeMessages):b&&v.isInt(b)?w.loadMessages("messages/about_topic/"+b+".json?threaded=true&newer_than="+B.lastMessageId,w.placeMessages):w.loadMessages("messages.json?threaded=true&newer_than="+B.lastMessageId,w.placeMessages)}B.count%B.showDelay===0&&(B.count=B.count+B.showDelay)}function t(){v.log("Trigger LoginStatus"),yam.getLoginStatus(function(a){a.authResponse?(v.log("Logged in"),v.log("Access token is: ",a.access_token),l()):(z.landing.removeClass(A.hidden),yam.connect.loginButton("#yammer-login",function(a){a.authResponse&&(v.log("Logged in"),v.log("Access token is: ",a.access_token),l())}))})}var u=Yt.Constants,v=Yt.Util,w=Yt.Feed,x=Yt.Settings,y=Yt.SettingsModal,z=(y.oauth,v.getElements()),A=u.classes,B=u.defaultConfig,C=u.settingKeys;t()}(jQuery,moment,Handlebars,window,document);